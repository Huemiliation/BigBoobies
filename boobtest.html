<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Memories</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { script: ['"Great Vibes"', 'cursive'], sans: ['"Montserrat"', 'sans-serif'] },
                    colors: { glass: "rgba(255, 255, 255, 0.05)" },
                    animation: {
                        'scroll': 'scroll 60s linear infinite',
                        'spin-slow': 'spin 8s linear infinite',
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        scroll: { '0%': { transform: 'translateX(0)' }, '100%': { transform: 'translateX(-33.33%)' } },
                        shimmer: { '0%': { backgroundPosition: '-1000px 0' }, '100%': { backgroundPosition: '1000px 0' } }
                    }
                }
            }
        }
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { overflow-x: hidden; background-color: #000; transition: background 1.5s ease-in-out; }
        
        /* Initial Loader */
        #initial-loader {
            position: fixed; inset: 0; z-index: 9999; background: #000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }
        .loader-heart {
            width: 50px; height: 50px; background: #e11d48; transform: rotate(45deg);
            animation: heartPulse 1.2s infinite; position: relative;
        }
        .loader-heart::before, .loader-heart::after {
            content: ""; position: absolute; width: 50px; height: 50px; border-radius: 50%; background: #e11d48;
        }
        .loader-heart::before { left: -25px; } .loader-heart::after { top: -25px; }
        @keyframes heartPulse { 0%, 100% { transform: rotate(45deg) scale(0.8); } 50% { transform: rotate(45deg) scale(1); } }

        /* Liquid Glass */
        .liquid-glass {
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
        }
        
        /* Special Golden Effect */
        .special-border {
            position: relative;
            background: rgba(20, 10, 5, 0.4);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.1);
        }
        .special-border::before {
            content: ""; position: absolute; inset: -2px; z-index: -1;
            background: linear-gradient(45deg, #fbbf24, #d97706, #fbbf24, #78350f);
            background-size: 400%;
            border-radius: 1.5rem;
            animation: gradientBorder 5s ease infinite;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude;
        }
        @keyframes gradientBorder { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .gold-text {
            background: linear-gradient(to right, #fcd34d, #f59e0b, #fff, #f59e0b);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shine 4s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        #stars { position: fixed; inset: 0; pointer-events: none; z-index: 0; opacity: 0.6; }
        #particle-container { position: fixed; inset: 0; pointer-events: none; z-index: 1; }
        .heart-particle { position: absolute; opacity: 0; }
    </style>
</head>
<body>

    <div id="initial-loader">
        <div class="loader-heart"></div>
        <p class="mt-8 text-white font-sans text-xs tracking-[0.3em] uppercase animate-pulse">Loading Memories...</p>
    </div>

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        const { motion, AnimatePresence, useInView } = window.Motion;

        // ==========================================
        //  CONFIGURATION
        // ==========================================
        const BASE_URL = "https://huemiliation.github.io/BigBoobies/memories/";

        const SHIRAZ_NOTES = {
            1: "The moment we arrived in Shiraz.",
            2: "Looking at you here, I felt so lucky.",
            12: "The architecture was stunning.",
            36: "I didn't want this trip to end.",
        };

        const getPhotos = (path, count, notesMap = {}, defaultNote = "") => {
            return Array.from({ length: count }, (_, i) => ({
                id: `${path}-${i+1}`,
                src: `${BASE_URL}${path}/${i+1}.jpg`,
                note: notesMap[i+1] || defaultNote
            }));
        };

        const generatePlaceholders = (seed, context, count = 5) => {
            return Array.from({ length: count }, (_, i) => ({
                id: `${seed}-${i}`,
                src: `https://picsum.photos/seed/${seed * (i + 1)}/600/800`,
                note: `Memory #${i + 1} from ${context}.`
            }));
        };

        const CHAPTERS = [
            {
                id: 1,
                title: "Chapter 1",
                subtitle: "Unknowing & Joy",
                theme: { from: "#0f172a", to: "#172554", accent: "#38bdf8" }, 
                song: { title: "Separator", url: "https://huemiliation.github.io/BigBoobies/08%20Radiohead%20-%20Separator.mp3" },
                albums: [
                    { title: "First Glances", month: "JANUARY", photos: generatePlaceholders(101, "First Glances") },
                    { title: "Her Birthday", month: "MARCH", type: "birthday", photos: generatePlaceholders(102, "Her Birthday") },
                    { title: "First Laughs", month: "APRIL", photos: generatePlaceholders(103, "First Laughs") }
                ]
            },
            {
                id: 2,
                title: "Chapter 2",
                subtitle: "Golden Hour",
                theme: { from: "#1c1006", to: "#3a1d08", accent: "#fbbf24" }, 
                song: { title: "Weird Fishes", url: "https://huemiliation.github.io/BigBoobies/04%20Radiohead%20-%20Weird%20Fishes_%20Arpeggi.mp3" },
                albums: [
                    { title: "Sunsets", month: "JULY", photos: generatePlaceholders(201, "Sunsets") },
                    { title: "His Birthday", month: "AUGUST", type: "birthday", photos: generatePlaceholders(202, "His Birthday") },
                    { title: "Warm Nights", month: "SEPTEMBER", photos: generatePlaceholders(203, "Warm Nights") }
                ]
            },
            {
                id: 3,
                title: "Chapter 3",
                subtitle: "Blood & Forever",
                theme: { from: "#2a0a0a", to: "#000000", accent: "#f43f5e" }, 
                song: { title: "Motion Picture Soundtrack", url: "https://raw.githubusercontent.com/Huemiliation/BigBoobies/main/10%20Radiohead%20-%20Motion%20Picture%20Soundtrack.mp3" },
                albums: [
                    { title: "Shiraz: The Best Trip", month: "JANUARY", isSpecial: true, photos: getPhotos("2025/january/shiraz", 36, SHIRAZ_NOTES, "A beautiful moment from Shiraz.") },
                    { title: "Milad Moments", month: "JANUARY", photos: getPhotos("2025/january/milad", 12, {}, "Fun times at Milad.") },
                    { title: "Snowy Days", month: "JANUARY", photos: getPhotos("2025/january/snow", 9, {}, "Playing around in the snow!") },
                    { title: "Just Us", month: "JANUARY", photos: getPhotos("2025/january/other", 2, {}, "Cute little moments.") },
                    { title: "Future Memories", month: "FOREVER", photos: generatePlaceholders(305, "The Future") }
                ]
            }
        ];

        // ==========================================
        //  COMPONENTS
        // ==========================================

        const ParticleSystem = ({ activeChapter }) => {
            useEffect(() => {
                const container = document.getElementById('particle-container');
                let colors = ['#ffffff'];
                let spawnRate = 1500;
                
                if(activeChapter === 1) { colors = ['#fbbf24', '#ffffff']; spawnRate = 800; }
                if(activeChapter === 2) { colors = ['#f43f5e', '#ff00ff']; spawnRate = 400; }

                const interval = setInterval(() => {
                    if (document.hidden) return;
                    const h = document.createElement('div');
                    h.innerHTML = '❤';
                    h.className = 'heart-particle';
                    h.style.left = Math.random() * 100 + 'vw';
                    h.style.bottom = '-50px';
                    h.style.fontSize = (Math.random() * 20 + 10) + 'px';
                    h.style.color = colors[Math.floor(Math.random() * colors.length)];
                    h.style.textShadow = activeChapter === 2 ? `0 0 10px ${h.style.color}` : 'none';
                    
                    h.animate([
                        { transform: 'translateY(0) rotate(0deg)', opacity: 0 },
                        { opacity: 0.8, offset: 0.1 },
                        { transform: `translateY(-100vh) rotate(${Math.random()*360}deg)`, opacity: 0 }
                    ], { duration: 5000 + Math.random() * 5000, easing: 'linear' }).onfinish = () => h.remove();

                    container.appendChild(h);
                }, spawnRate);
                return () => clearInterval(interval);
            }, [activeChapter]);
            return null;
        };

        // Scroll Triggered Typewriter (1-1.5 seconds per word)
        const ScrollRevealer = ({ text, accent }) => {
            const ref = useRef(null);
            const isInView = useInView(ref, { once: true, amount: 0.5 });
            const [display, setDisplay] = useState("");

            useEffect(() => {
                if (isInView) {
                    const totalDuration = 1200; // 1.2 seconds for full text
                    const charDelay = Math.max(100, totalDuration / text.length); // Calculate delay per char
                    
                    let i = 0;
                    const t = setInterval(() => {
                        if (i < text.length) {
                            setDisplay(prev => prev + text.charAt(i));
                            i++;
                        } else clearInterval(t);
                    }, charDelay);
                    return () => clearInterval(t);
                }
            }, [isInView, text]);

            return (
                <div ref={ref} className="font-sans font-black text-2xl md:text-4xl tracking-widest uppercase opacity-90 min-h-[40px]" style={{ color: accent }}>
                    {display}
                    {isInView && display.length < text.length && <span className="animate-pulse">|</span>}
                </div>
            );
        };

        const Typewriter = ({ text, speed = 30 }) => {
            const [disp, setDisp] = useState("");
            useEffect(() => {
                setDisp("");
                let i = 0;
                const t = setInterval(() => {
                    if(i < text.length) { setDisp(p => p + text.charAt(i)); i++; }
                    else clearInterval(t);
                }, speed);
                return () => clearInterval(t);
            }, [text]);
            return <span>{disp}</span>;
        };

        // --- Smooth Transition Music Controller ---
        const MusicController = ({ song, accent, activeSong, onToggle, audioRef }) => {
            const isActive = activeSong === song.url;
            const [progress, setProgress] = useState(0);

            useEffect(() => {
                let frame;
                const update = () => {
                    if (isActive && audioRef.current) {
                        const aud = audioRef.current;
                        if(aud.duration) setProgress((aud.currentTime / aud.duration) * 100);
                        frame = requestAnimationFrame(update);
                    }
                };
                if(isActive) update();
                return () => cancelAnimationFrame(frame);
            }, [isActive]);

            return (
                <div className="flex justify-center my-6 h-20 z-30 relative">
                    <motion.div 
                        layout
                        initial={false}
                        transition={{ type: "spring", stiffness: 300, damping: 30 }}
                        className={`relative rounded-full flex items-center overflow-hidden cursor-pointer backdrop-blur-md`}
                        style={{ 
                            backgroundColor: isActive ? 'rgba(0,0,0,0.6)' : 'rgba(255,255,255,0.05)',
                            borderColor: accent, 
                            borderWidth: isActive ? '1px' : '2px',
                        }}
                        // Idle Animation: Pulse & Glow
                        animate={!isActive ? {
                            boxShadow: `0 0 20px ${accent}`,
                            scale: [1, 1.05, 1],
                        } : {
                            boxShadow: 'none',
                            scale: 1
                        }}
                        onClick={() => !isActive && onToggle(song.url)}
                    >
                        <AnimatePresence mode="wait">
                            {!isActive ? (
                                <motion.div 
                                    key="play"
                                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                                    transition={{ duration: 0.2 }}
                                    className="flex items-center justify-center px-10 py-4 gap-3 min-w-[200px]"
                                >
                                    <span className="text-2xl text-white drop-shadow-md">▶</span>
                                    <span className="text-sm font-bold uppercase tracking-widest text-white whitespace-nowrap drop-shadow-md">{song.title}</span>
                                </motion.div>
                            ) : (
                                <motion.div 
                                    key="controls"
                                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                                    transition={{ duration: 0.3 }}
                                    className="px-6 py-3 flex items-center gap-4 min-w-[320px]"
                                >
                                    <button onClick={(e) => { e.stopPropagation(); onToggle(song.url); }} className="hover:scale-110 active:scale-95 transition-transform">
                                        <span className="text-xl" style={{color: accent}}>⏸</span>
                                    </button>
                                    <div className="flex-1 flex flex-col gap-1">
                                        <span className="text-[10px] font-bold uppercase tracking-wider text-white">{song.title}</span>
                                        <div className="w-full h-1 bg-white/20 rounded-full overflow-hidden">
                                            <div className="h-full transition-all duration-100" style={{ backgroundColor: accent, width: `${progress}%` }}></div>
                                        </div>
                                    </div>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </motion.div>
                </div>
            );
        };

        const Carousel = ({ photos, onOpen, isSpecial }) => {
            const speed = Math.max(40, photos.length * 3) + 's';
            const displayPhotos = useMemo(() => [...photos, ...photos, ...photos], [photos]);

            return (
                <div className="w-full overflow-hidden relative py-6 group">
                    <div className="absolute left-0 top-0 bottom-0 w-8 z-10 bg-gradient-to-r from-black/50 to-transparent pointer-events-none"></div>
                    <div className="absolute right-0 top-0 bottom-0 w-8 z-10 bg-gradient-to-l from-black/50 to-transparent pointer-events-none"></div>
                    
                    <div 
                        className="flex w-max gap-4 md:gap-6 animate-scroll hover:[animation-play-state:paused]"
                        style={{ animationDuration: speed }}
                    >
                        {displayPhotos.map((photo, idx) => (
                            <div
                                key={`${photo.id}-${idx}`}
                                className={`relative flex-shrink-0 rounded-xl overflow-hidden cursor-pointer border transition-transform duration-300 hover:scale-105 
                                    ${isSpecial 
                                        ? 'w-[180px] h-[260px] border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.5)]' 
                                        : 'w-[140px] h-[200px] border-white/10'}`}
                                onClick={() => onOpen(idx % photos.length)}
                            >
                                <img 
                                    src={photo.src} alt="memory" loading="lazy" className="w-full h-full object-cover"
                                    onError={(e) => e.target.src = 'https://picsum.photos/200/300'}
                                />
                                <div className="absolute inset-0 bg-black/10 hover:bg-transparent transition-colors"></div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // Heart Icon Component
        const HeartIcon = ({ rotate, color }) => (
            <svg 
                width="40" height="40" viewBox="0 0 24 24" fill="currentColor" 
                style={{ transform: `rotate(${rotate}deg)`, color: color, filter: 'drop-shadow(0 0 5px rgba(255,255,255,0.5))' }}
            >
                 <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
        );

        const Lightbox = ({ isOpen, albumPhotos, startIndex, onClose, accent }) => {
            if (!isOpen || !albumPhotos) return null;
            const [idx, setIdx] = useState(startIndex);
            const photo = albumPhotos[idx];

            const navigate = (dir) => {
                setIdx((prev) => (prev + dir + albumPhotos.length) % albumPhotos.length);
            };

            return (
                <motion.div 
                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                    className="fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4"
                    onClick={onClose}
                >
                    <button onClick={onClose} className="absolute top-4 right-4 p-3 bg-white/10 rounded-full hover:bg-white/20 z-[110]">
                        <svg width="24" height="24" viewBox="0 0 24 24" stroke="white" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                    
                    {/* Heart Navigation */}
                    <button onClick={(e) => { e.stopPropagation(); navigate(-1); }} className="absolute left-2 md:left-8 top-1/2 -translate-y-1/2 z-[105] p-4 transition-transform active:scale-75 hover:scale-110 cursor-pointer">
                        <HeartIcon rotate={-90} color={accent} />
                    </button>
                    <button onClick={(e) => { e.stopPropagation(); navigate(1); }} className="absolute right-2 md:right-8 top-1/2 -translate-y-1/2 z-[105] p-4 transition-transform active:scale-75 hover:scale-110 cursor-pointer">
                        <HeartIcon rotate={90} color={accent} />
                    </button>

                    <div className="flex flex-col items-center gap-4 w-full max-w-4xl h-full justify-center" onClick={e => e.stopPropagation()}>
                        <div className="relative flex-1 w-full flex items-center justify-center overflow-hidden">
                            <motion.img 
                                key={photo.src}
                                initial={{ opacity: 0, scale: 0.95 }}
                                animate={{ opacity: 1, scale: 1 }}
                                src={photo.src}
                                className="max-w-full max-h-[70vh] object-contain rounded-lg shadow-2xl"
                                style={{ boxShadow: `0 0 40px ${accent}20` }}
                            />
                        </div>

                        <div className="w-full max-w-lg flex-shrink-0">
                            <div className="liquid-glass rounded-xl p-4 w-full overflow-x-auto hide-scrollbar border-l-4 mb-2" style={{ borderColor: accent }}>
                                <p className="text-gray-200 font-sans text-sm md:text-base font-light tracking-wide whitespace-nowrap pr-8">
                                    <Typewriter text={photo.note} speed={20} />
                                </p>
                            </div>
                            <div className="flex items-center gap-3">
                                <span className="text-[10px] font-mono text-gray-400">{idx + 1}</span>
                                <div className="flex-1 h-1 bg-white/10 rounded-full overflow-hidden">
                                    <motion.div className="h-full" style={{ backgroundColor: accent }} animate={{ width: `${((idx + 1) / albumPhotos.length) * 100}%` }} />
                                </div>
                                <span className="text-[10px] font-mono text-gray-400">{albumPhotos.length}</span>
                            </div>
                        </div>
                    </div>
                </motion.div>
            );
        };

        const App = () => {
            const [activeChapter, setActiveChapter] = useState(0);
            const [lightbox, setLightbox] = useState({ open: false, photos: [], index: 0 });
            const [activeSong, setActiveSong] = useState(null);
            const audioRef = useRef(null);

            useEffect(() => {
                const l = document.getElementById('initial-loader');
                if(l) setTimeout(() => { l.style.opacity = '0'; setTimeout(() => l.remove(), 800); }, 2000);
            }, []);

            useEffect(() => {
                const onScroll = () => {
                    document.querySelectorAll('.chapter-section').forEach((sec, i) => {
                        const r = sec.getBoundingClientRect();
                        if (r.top <= window.innerHeight * 0.6 && r.bottom >= window.innerHeight * 0.4) setActiveChapter(i);
                    });
                };
                window.addEventListener('scroll', onScroll);
                return () => window.removeEventListener('scroll', onScroll);
            }, []);

            useEffect(() => {
                const aud = audioRef.current;
                if(!aud) return;
                const onEnd = () => setActiveSong(null);
                aud.addEventListener('ended', onEnd);
                if(activeSong) { aud.src = activeSong; aud.play().catch(e => console.log(e)); }
                else aud.pause();
                return () => { aud.pause(); aud.removeEventListener('ended', onEnd); }
            }, [activeSong]);

            const theme = CHAPTERS[activeChapter].theme;

            return (
                <div className="min-h-screen transition-colors duration-[2000ms]" style={{ background: `linear-gradient(to bottom, ${theme.from}, ${theme.to})` }}>
                    <div id="stars"></div>
                    <div id="particle-container"></div>
                    <ParticleSystem activeChapter={activeChapter} />
                    <audio ref={audioRef} />

                    <div className="relative z-10 max-w-6xl mx-auto px-4 pb-32">
                        <header className="pt-32 pb-20 text-center animate-fade-in-up">
                            <h1 className="font-script text-7xl md:text-9xl text-white mb-4 drop-shadow-xl">Our Memories</h1>
                        </header>

                        {CHAPTERS.map((chapter) => (
                            <section key={chapter.id} className="chapter-section py-24 min-h-[85vh]">
                                <div className="text-center mb-16">
                                    <h2 className="font-script text-6xl text-white/90 mb-2">{chapter.title}</h2>
                                    <h3 className="font-sans text-sm tracking-[0.4em] uppercase opacity-70" style={{ color: theme.accent }}>{chapter.subtitle}</h3>
                                    
                                    <MusicController 
                                        song={chapter.song} accent={theme.accent} activeSong={activeSong} 
                                        audioRef={audioRef} onToggle={(url) => setActiveSong(activeSong === url ? null : url)} 
                                    />
                                </div>

                                <div className="space-y-16">
                                    {chapter.albums.map((album, idx) => {
                                        const showMonth = idx === 0 || album.month !== chapter.albums[idx-1].month;
                                        return (
                                            <div key={idx}>
                                                {showMonth && (
                                                    <div className="mb-8 mt-12 flex items-center gap-4">
                                                        <div className="h-[1px] flex-1 bg-gradient-to-r from-transparent to-white/20"></div>
                                                        <ScrollRevealer text={album.month} accent={theme.accent} />
                                                        <div className="h-[1px] flex-1 bg-gradient-to-l from-transparent to-white/20"></div>
                                                    </div>
                                                )}

                                                {/* Album Container - SPECIAL DESIGN APPLIED HERE */}
                                                <div className={`rounded-3xl p-6 transition-all duration-500 
                                                    ${album.isSpecial 
                                                        ? 'special-border' // NEW CLASS FOR ANIMATED BORDER
                                                        : 'liquid-glass hover:bg-white/5'}`
                                                }>
                                                    <div className="flex items-center gap-3 mb-4">
                                                        {/* Special Title Styling */}
                                                        <h4 className={`font-sans font-bold text-lg ml-2 ${album.isSpecial ? 'gold-text text-xl' : 'text-white'}`}>
                                                            {album.title}
                                                        </h4>
                                                        {album.isSpecial && (
                                                            <div className="bg-amber-500/20 border border-amber-400/50 text-amber-300 text-[10px] font-bold px-2 py-0.5 rounded shadow-[0_0_10px_rgba(251,191,36,0.5)] animate-pulse">
                                                                SPECIAL
                                                            </div>
                                                        )}
                                                    </div>

                                                    <Carousel 
                                                        photos={album.photos} 
                                                        isSpecial={album.isSpecial}
                                                        onOpen={(i) => setLightbox({ open: true, photos: album.photos, index: i })}
                                                    />
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </section>
                        ))}
                    </div>

                    <AnimatePresence>
                        {lightbox.open && (
                            <Lightbox 
                                isOpen={lightbox.open} 
                                albumPhotos={lightbox.photos} 
                                startIndex={lightbox.index} 
                                onClose={() => setLightbox({ ...lightbox, open: false })} 
                                accent={theme.accent}
                            />
                        )}
                    </AnimatePresence>
                </div>
            );
        };

        const styleSheet = document.createElement("style");
        styleSheet.innerText = `
            @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-33.33%); } }
            .animate-scroll { animation: scroll 80s linear infinite; }
            .animate-fade-in-up { animation: fadeInUp 1.2s ease-out forwards; }
            @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
            #stars { background-image: radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0)), radial-gradient(2px 2px at 40px 70px, #fff, rgba(0,0,0,0)), radial-gradient(2px 2px at 50px 160px, #ddd, rgba(0,0,0,0)); background-size: 200px 200px; animation: zoom 100s infinite; }
            @keyframes zoom { 0% { transform: scale(1); } 50% { transform: scale(1.5); } 100% { transform: scale(1); } }
        `;
        document.head.appendChild(styleSheet);

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
